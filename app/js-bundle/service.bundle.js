!function(){class e{constructor(){this.init()}init(){console.log("Service page initialized"),this.cacheElements(),this.setupEventListeners(),this.setInitialStates(),this.setupImageResizer()}cacheElements(){this.serviceBlocks=document.querySelectorAll(".service-block"),this.tabs=document.querySelectorAll(".service-tab"),this.scrollable=document.querySelector(".service-block__image-inner"),this.buttons=document.querySelectorAll(".service-block__button"),this.servicePopup=document.querySelector(".service-popup"),this.popupBackground=document.querySelector(".service-popup__background"),this.serviceNavPopup=document.querySelector(".services-nav__link"),this.arrowUp=document.querySelector(".service-block__arrow--up"),this.arrowDown=document.querySelector(".service-block__arrow--down"),this.serviceWrappers=document.querySelectorAll(".service-block__wrapper"),this.currentServiceId=0,this.currentCaseId=0,this.animationDuration=400,this.serviceHeight=this.serviceBlocks[0]?.offsetHeight||0,this.tabsHeight=this.tabs[0]?.offsetHeight||0}setupEventListeners(){this.arrowUp?.addEventListener("click",(()=>this.navigateCase("up"))),this.arrowDown?.addEventListener("click",(()=>this.navigateCase("down"))),this.tabs.forEach(((e,t)=>{e.addEventListener("click",(()=>this.switchService(t))),e.setAttribute("role","tab"),e.setAttribute("aria-selected",0===t),e.setAttribute("tabindex",0===t?"0":"-1")})),this.buttons.forEach((e=>{e.addEventListener("click",(()=>this.togglePopup()))})),this.serviceNavPopup.addEventListener("click",(()=>this.togglePopup())),this.popupBackground?.addEventListener("click",(()=>this.togglePopup())),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.servicePopup.classList.contains("active")&&this.togglePopup()}))}setInitialStates(){this.scrollable?.scrollTo(0,100),this.updateArrowStates()}setupImageResizer(){const e=()=>{document.querySelectorAll(".service-block__image--mobile").forEach((e=>{const t=e.offsetHeight;e.style.minWidth=`${t}px`}))};window.addEventListener("DOMContentLoaded",e),window.addEventListener("resize",e)}navigateCase(e){if("down"===e&&this.currentCaseId<this.serviceWrappers.length-1)this.currentCaseId++;else{if(!("up"===e&&this.currentCaseId>0))return;this.currentCaseId--}this.animateCaseTransition(),this.updateArrowStates(),this.updateAriaLiveRegion()}animateCaseTransition(){const e=`-${(this.serviceHeight-this.tabsHeight)*this.currentCaseId}px`;this.serviceWrappers.forEach((t=>{t.style.transform=`translateY(${e})`,t.setAttribute("aria-hidden",!t.classList.contains("service-block__wrapper--active"))}))}updateArrowStates(){0===this.currentCaseId?(this.arrowUp.classList.remove("active"),this.arrowUp.setAttribute("aria-disabled","true")):(this.arrowUp.classList.add("active"),this.arrowUp.setAttribute("aria-disabled","false")),this.currentCaseId===this.serviceWrappers.length-1?(this.arrowDown.classList.remove("active"),this.arrowDown.setAttribute("aria-disabled","true")):(this.arrowDown.classList.add("active"),this.arrowDown.setAttribute("aria-disabled","false"))}switchService(e){this.tabs.forEach(((t,i)=>{const s=i===e;t.classList.toggle("service-tab--active",s),t.setAttribute("aria-selected",s),t.setAttribute("tabindex",s?"0":"-1")})),this.animateServiceTransition(e)}animateServiceTransition(e){const t=this.serviceBlocks[this.currentServiceId],i=this.serviceBlocks[e];t?(t.classList.remove("active"),t.classList.add("fade-out"),setTimeout((()=>{t.style.display="none",t.classList.remove("fade-out"),this.currentServiceId=e,this.showNewService(i)}),this.animationDuration)):this.showNewService(i)}showNewService(e){e.style.display="flex",setTimeout((()=>{e.classList.add("fade-in"),e.classList.add("active"),e.focus()}),10)}togglePopup(){const e=!this.servicePopup.classList.contains("active");this.servicePopup.classList.toggle("active"),e?setTimeout((()=>{this.servicePopup.classList.add("fade-in"),this.servicePopup.setAttribute("aria-hidden","false")}),this.animationDuration):(this.servicePopup.classList.remove("fade-in"),setTimeout((()=>{this.servicePopup.setAttribute("aria-hidden","true")}),this.animationDuration)),e?(document.body.style.overflow="hidden",this.servicePopup.querySelector("button, [href], input, select, textarea").focus()):document.body.style.overflow=""}updateAriaLiveRegion(){const e=document.getElementById("aria-live-region")||this.createLiveRegion(),t=this.serviceWrappers[this.currentCaseId],i=t.querySelector(".service-block__name")?.textContent||"";e.textContent=`Текущий кейс: ${i}`}createLiveRegion(){const e=document.createElement("div");return e.id="aria-live-region",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e}}document.addEventListener("DOMContentLoaded",(()=>{new e}))}();